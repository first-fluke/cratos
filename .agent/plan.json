{
    "goal": "Resolve Telegram Persona Info Response Issue by implementing a dynamic Persona information tool",
    "priority": "High",
    "constraints": [
        "Avoid circular dependencies between cratos-tools and cratos-core",
        "Minimize LLM token usage by not hardcoding all 14 personas' data into the system prompt",
        "Ensure LLM understands when and how to call the new tool"
    ],
    "assumptions": [
        "Adding an application-level tool in src/tools/persona.rs is the most idiomatic approach because it uses cratos-core's loading facilities without creating circular deps",
        "Updating the planner.rs system prompt to describe the persona tool will solve the problem"
    ],
    "alternatives": [
        "Hardcode all 14 personas into the system prompt (rejected due to context bloat)",
        "Move PersonaLoader to cratos-tools (rejected due to structural disruption and scope creep)"
    ],
    "tasks": [
        "Step 5.1: Create `src/tools/persona.rs` implementing `cratos_tools::registry::Tool`",
        "Step 5.2: Update `src/tools/mod.rs` to export the new tool",
        "Step 5.3: Register `PersonaTool` in `src/server/init.rs` inside `ToolRegistry`",
        "Step 5.4: Modify `DEFAULT_SYSTEM_PROMPT` in `crates/cratos-core/src/planner.rs` to inform the LLM about the `persona` tool"
    ],
    "reviews": {
        "step2_completeness": {
            "status": "passed",
            "reviewer": "PM Agent (Self)",
            "check": "All root causes from issue document mapped to the plan (tool missing, system prompt limited)."
        },
        "step3_meta": {
            "status": "passed",
            "reviewer": "PM Agent (Self)",
            "check": "Review confirmed no constraints are violated, and API boundaries are respected."
        },
        "step4_simplicity": {
            "status": "passed",
            "reviewer": "PM Agent (Self)",
            "check": "Selected the simplest solution (adding a tool at binary level) instead of heavy refactoring of cratos-tools/cratos-core dependency."
        }
    },
    "gates": {
        "PLAN_GATE": true,
        "IMPL_GATE": false,
        "VERIFY_GATE": false,
        "REFINE_GATE": false,
        "SHIP_GATE": false
    }
}